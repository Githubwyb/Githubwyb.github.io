<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-diy.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-diy.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-diy.png"><link rel="mask-icon" href="/images/logo-diy.svg" color="#222"><meta name="baidu-site-verification" content="y1cfESbTt9nd3LsA"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/lib/pace/pace-theme-flash.min.css"><script src="/lib/pace/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"githubwyb.github.io",root:"/",scheme:"Pisces",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!0,color:"#ff0000",save:"auto"},fancybox:!1,mediumzoom:!0,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="一、汇编通用1. 语法1; 注释  二、nask汇编汇编指令来源于《30天自制操作系统》一书中，编译环境为nask，似乎是作者自己写的编译，并不清楚和一般的汇编的区别 1. 指令介绍12345678910111213141516171819202122232425DB      ; 添加1个字节长度数据DW      ; 添加2个字节长度数据DD      ; 添加4个字节长度数据RESB"><meta property="og:type" content="article"><meta property="og:title" content="汇编语言学习笔记"><meta property="og:url" content="https://githubwyb.github.io/blogs/2019-04-25-assemblyLanguage/index.html"><meta property="og:site_name" content="技术的路上奔跑"><meta property="og:description" content="一、汇编通用1. 语法1; 注释  二、nask汇编汇编指令来源于《30天自制操作系统》一书中，编译环境为nask，似乎是作者自己写的编译，并不清楚和一般的汇编的区别 1. 指令介绍12345678910111213141516171819202122232425DB      ; 添加1个字节长度数据DW      ; 添加2个字节长度数据DD      ; 添加4个字节长度数据RESB"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2019-04-25T07:56:41.000Z"><meta property="article:modified_time" content="2023-10-15T02:28:27.647Z"><meta property="article:author" content="王钰博"><meta property="article:tag" content="wyb"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://githubwyb.github.io/blogs/2019-04-25-assemblyLanguage/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>汇编语言学习笔记 | 技术的路上奔跑</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">技术的路上奔跑</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">入门</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-fw fa-sitemap"></i>站点地图</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a> <a href="https://github.com/Githubwyb" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://githubwyb.github.io/blogs/2019-04-25-assemblyLanguage/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/12.jpg"><meta itemprop="name" content="王钰博"><meta itemprop="description" content="个人博客"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="技术的路上奔跑"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">汇编语言学习笔记</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-04-25 15:56:41" itemprop="dateCreated datePublished" datetime="2019-04-25T15:56:41+08:00">2019-04-25</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2023-10-15 10:28:27" itemprop="dateModified" datetime="2023-10-15T10:28:27+08:00">2023-10-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Program/" itemprop="url" rel="index"><span itemprop="name">Program</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Program/C-C/" itemprop="url" rel="index"><span itemprop="name">C/C++</span></a> </span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span id="busuanzi_value_page_pv"></span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><span class="post-meta-item-text">Valine：</span> <a title="valine" href="/blogs/2019-04-25-assemblyLanguage/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/blogs/2019-04-25-assemblyLanguage/" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>3.3k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>3 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="一、汇编通用"><a href="#一、汇编通用" class="headerlink" title="一、汇编通用"></a>一、汇编通用</h1><h2 id="1-语法"><a href="#1-语法" class="headerlink" title="1. 语法"></a>1. 语法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">; 注释</span><br></pre></td></tr></table></figure><h1 id="二、nask汇编"><a href="#二、nask汇编" class="headerlink" title="二、nask汇编"></a>二、nask汇编</h1><p>汇编指令来源于《30天自制操作系统》一书中，编译环境为nask，似乎是作者自己写的编译，并不清楚和一般的汇编的区别</p><h2 id="1-指令介绍"><a href="#1-指令介绍" class="headerlink" title="1. 指令介绍"></a>1. 指令介绍</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">DB      ; 添加1个字节长度数据</span><br><span class="line">DW      ; 添加2个字节长度数据</span><br><span class="line">DD      ; 添加4个字节长度数据</span><br><span class="line">RESB    ; 用0x00填充x字节</span><br><span class="line">$       ; 变量，可指当前位置的字节数</span><br><span class="line">ORG     ; 指定运行时机器语言指令装载内存地址，有这条指令后，$代表内存地址</span><br><span class="line">JMP     ; 相当于C语言goto</span><br><span class="line">MOV     ; 赋值，&quot;MOV AV, 0&quot;代表&quot;AV = 0&quot;，拷贝赋值而非移动，位数必须相同，不然编译出错</span><br><span class="line">[]      ; 代表内存地址</span><br><span class="line">CMP     ; 比较指令</span><br><span class="line">JE      ; &quot;Jump if equal&quot;，比较跳转指令，相等跳转，否则继续执行，和CMP配合使用</span><br><span class="line">JA      ; &quot;Jump if above&quot;，大于跳转，否则继续执行，和CMP配合使用</span><br><span class="line">JB      ; &quot;Jump if below&quot;，小于跳转，否则继续执行，和CMP配合使用</span><br><span class="line">JAE     ; &quot;Jump if above or equal&quot;，大于等于跳转，否则继续执行，和CMP配合使用</span><br><span class="line">JBE     ; &quot;Jump if below or equal&quot;，小于等于跳转，否则继续执行，和CMP配合使用</span><br><span class="line">JC      ; &quot;Jump if carry&quot;，捕获&quot;进位标志&quot;，如果为1则跳转</span><br><span class="line">JNC     ; &quot;Jump if not carry&quot;，捕获&quot;进位标志&quot;，如果为0则跳转</span><br><span class="line">EQU     ; 定义常数，相当于define</span><br><span class="line">HLT     ; CPU停止动作，外部事件唤醒，可能时键盘、鼠标等外部事件</span><br><span class="line">PUSH    ; 将寄存器内容入栈，PUSH EBP</span><br><span class="line">POP     ; 将栈顶内容设置到寄存器内，POP EBP</span><br><span class="line">CLI     ; 禁止CPU中断</span><br><span class="line">STI     ; 使能CPU中断</span><br><span class="line">IN      ; 从外设读取数据</span><br><span class="line">OUT     ; 将数据写入外设</span><br></pre></td></tr></table></figure><p><strong>示例</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">    DB      0xeb, 0x4e, 0x90</span><br><span class="line">    DB      2               ; FAT的个数（必须为2）</span><br><span class="line">    DB      &quot;HELLOIPL&quot;      ; 启动区的名称可以是任意的字符串</span><br><span class="line">    DW      512             ;</span><br><span class="line">    DD      2880            ; 重写一次磁盘大小</span><br><span class="line">    DD      0xffffffff      ; （可能是）卷标号码</span><br><span class="line">    RESB    18              ; 先空出18字节</span><br><span class="line">    RESB    0x1fe-$         ; 填写0x00，直到0x001fe</span><br><span class="line"></span><br><span class="line">    ORG     0x7c00          ; 指明程序的装载地址</span><br><span class="line">    JMP     entry</span><br><span class="line"></span><br><span class="line">entry:</span><br><span class="line">    MOV     AV, 0           ; 初始化寄存器</span><br><span class="line">    MOV     SS, AX</span><br><span class="line">    MOV     AL, [SI]        ; AL赋值为SI值的地址的值，SI储存为678，则AL赋值为内存中678号地址指向的值</span><br><span class="line">    MOV     BYTE [678], 123 ; 将123按照Byte（8位）储存在内存的678地址中</span><br><span class="line"></span><br><span class="line">; MOV使用寄存器赋值只有BX、BP、SI、DI，其他寄存器赋值可以使用下面指令进行</span><br><span class="line">    MOV     BX, DX</span><br><span class="line">    MOV     AL, BYTE [BX]</span><br><span class="line"></span><br><span class="line">    CMP     AL, 0</span><br><span class="line">    JE      entry</span><br><span class="line"></span><br><span class="line">    CMP     AL, 0</span><br><span class="line">    JA      entry</span><br><span class="line"></span><br><span class="line">    CMP     AL, 0</span><br><span class="line">    JB      entry</span><br><span class="line"></span><br><span class="line">    CMP     AL, 0</span><br><span class="line">    JAE     entry</span><br><span class="line"></span><br><span class="line">    CMP     AL, 0</span><br><span class="line">    JBE     entry</span><br><span class="line"></span><br><span class="line">    JC      error           ; FLAGS.CF进位标志为1则跳转</span><br><span class="line">    JNC     fin             ; FLAGS.CF进位标志为0则跳转</span><br><span class="line"></span><br><span class="line">CYLS    EQU     10          ; 定义CYLS为10</span><br></pre></td></tr></table></figure><h3 id="1-1-MOV-指令详解"><a href="#1-1-MOV-指令详解" class="headerlink" title="1.1. MOV 指令详解"></a>1.1. MOV 指令详解</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MOV         AL, 0           ; AL寄存器值设置成0</span><br><span class="line">MOV         EDX, [ESP+4]    ; 将ESP内部存的地址偏移4，作为地址找到值赋值给EDX</span><br><span class="line">MOV		    [ECX], AL       ; 将AL内部的值，赋值给ECX值作为地址的地方</span><br></pre></td></tr></table></figure><h2 id="2-实现C语言中的-void-write-mem8-char-addr-char-data"><a href="#2-实现C语言中的-void-write-mem8-char-addr-char-data" class="headerlink" title="2. 实现C语言中的 void write_mem8(char *addr, char data)"></a>2. 实现C语言中的 void write_mem8(char *addr, char data)</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">write_mem8</span><span class="params">(<span class="type">char</span> *addr, <span class="type">char</span> data)</span> </span>&#123;</span><br><span class="line">    *addr = data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>手写</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">_write_mem8:	; void write_mem8(char *addr, char data);</span><br><span class="line">    MOV		ECX, [ESP+4]		; [ESP+4]中存放的是addr，读到ECX中</span><br><span class="line">    MOV		AL, [ESP+8]		    ; [ESP+8]存放的是data，读到AL中</span><br><span class="line">    MOV		[ECX], AL</span><br><span class="line">    RET</span><br></pre></td></tr></table></figure><ul><li>nask编译出来的</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">	GLOBAL	_write_mem8</span><br><span class="line">_write_mem8:</span><br><span class="line">	PUSH	EBP</span><br><span class="line">	MOV	    EBP, ESP</span><br><span class="line">	MOV	    EAX, DWORD [8+EBP]</span><br><span class="line">	MOV	    EDX, DWORD [12+EBP]</span><br><span class="line">	MOV	    BYTE [EAX],DL</span><br><span class="line">	POP	    EBP</span><br><span class="line">	RET</span><br></pre></td></tr></table></figure><p><strong>差异解释</strong></p><ul><li>ESP、EBP见<a href="#3-%E5%AF%84%E5%AD%98%E5%99%A8%E8%A7%A3%E9%87%8A">寄存器解释</a></li><li><code>PUSH EBP</code>将EBP入栈，保存系统栈状态，但是由于PUSH，导致ESP向上移动了4位</li><li>对第一种汇编，ESP指向栈顶，<code>ESP+4</code>是第一个参数位置</li><li>对第二种汇编，EBP等于了ESP，但是ESP向上移动了4位，所以<code>EBP+8</code>是第一个参数的位置</li></ul><h2 id="3-寄存器解释"><a href="#3-寄存器解释" class="headerlink" title="3. 寄存器解释"></a>3. 寄存器解释</h2><ul><li>ESP: 栈指针寄存器(extended stack pointer)，其内存放着一个指针，该指针永远指向系统栈最上面一个栈帧的栈顶。</li><li>EBP: 基址指针寄存器(extended base pointer)，其内存放着一个指针，该指针永远指向系统栈最上面一个栈帧的底部。</li><li>EAX: 32位的寄存器，累加器(accumulator), 它是很多加法乘法指令的缺省寄存器。</li><li>EBX: 32位的寄存器，基地址(base)寄存器, 在内存寻址时存放基地址。</li><li>ECX: 32位的寄存器，计数器(counter), 是重复(REP)前缀指令和LOOP指令的内定计数器。</li><li>EDX: 32位的寄存器，总是被用来放整数除法产生的余数。</li><li>AX: 16位寄存器，同样也是EAX的低16位，同样有BX, CX, DX</li><li>AH: 8位寄存器，同样是AX的高8位，同样有BH, CH, DH</li><li>AL: 8位寄存器，同样是AX的低8位，同样有BL, CL, DL</li></ul><h1 id="三、bios内置汇编指令"><a href="#三、bios内置汇编指令" class="headerlink" title="三、bios内置汇编指令"></a>三、bios内置汇编指令</h1><h2 id="1-调用显卡（INT-0x10"><a href="#1-调用显卡（INT-0x10" class="headerlink" title="1. 调用显卡（INT 0x10)"></a>1. 调用显卡（INT 0x10)</h2><h3 id="1-1-显示字符"><a href="#1-1-显示字符" class="headerlink" title="1.1. 显示字符"></a>1.1. 显示字符</h3><ul><li>INT为软件中断指令，用于调用BIOS内置函数</li><li>BIOS（Basic input output system）为厂家开发的提供给操作系统开发人员使用的程序，其中含有许多基本程序，使用INT调用</li><li>0x10函数使用INT调用为显示一个字符函数</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">; 显示一个字符，无返回值</span><br><span class="line">    MOV     AH, 0x0e</span><br><span class="line">    MOV     AL, &#x27;a&#x27;         ; 显示字符&#x27;a&#x27;</span><br><span class="line">    MOV     BH, 0</span><br><span class="line">    MOV     BX, 15          ; 指定字符颜色</span><br><span class="line">    INT     0x10            ; 调用显卡BIOS</span><br></pre></td></tr></table></figure><h3 id="1-2-设置显卡显示模式"><a href="#1-2-设置显卡显示模式" class="headerlink" title="1.2. 设置显卡显示模式"></a>1.2. 设置显卡显示模式</h3><ul><li>AH&#x3D;0x00</li><li>AL&#x3D;模式<ul><li>0x03: 16色字符模式，80x25</li><li>0x12: VGA图形模式，640x480x4位彩色模式，独特的4面储存模式</li><li>0x13: VGA图形模式，320x200x8位彩色模式，调色板模式</li><li>0x6a: 扩展VGA图形模式，800x600x4位彩色模式，独特的4面储存模式（部分显卡不支持）</li></ul></li><li>返回值: 无</li></ul><h2 id="2-磁盘读写，扇区校验，寻道函数（INT-0x13"><a href="#2-磁盘读写，扇区校验，寻道函数（INT-0x13" class="headerlink" title="2. 磁盘读写，扇区校验，寻道函数（INT 0x13)"></a>2. 磁盘读写，扇区校验，寻道函数（INT 0x13)</h2><ul><li>AH &#x3D; 0x02（读盘） &#x2F; 0x04（写盘） &#x2F; 0x0c（寻道）</li><li>AL &#x3D; 处理几个扇区（只能处理连续的扇区）</li><li>CH &#x3D; 柱面号（0-1位）</li><li>CL &#x3D; 扇区号（0-5位）|（柱面号&amp;0x300）&gt;&gt; 2</li><li>DH &#x3D; 磁头号</li><li>DL &#x3D; 驱动器号</li><li>ES:BX &#x3D; 缓冲地址（校验和寻道不使用）</li><li>返回值<ul><li>FLAGS.CF &#x3D;&#x3D; 0，没有错误，AH &#x3D;&#x3D; 0</li><li>FLAGS.CF &#x3D;&#x3D; 1，有错误，错误号码存于AH（与重置<code>reset</code>功能一样）</li></ul></li></ul><h3 id="2-1-复位磁盘"><a href="#2-1-复位磁盘" class="headerlink" title="2.1. 复位磁盘"></a>2.1. 复位磁盘</h3><ul><li>AH &#x3D; 0x00</li><li>DL &#x3D; 0x00</li><li>INT 0x13</li></ul><h1 id="四、gcc汇编"><a href="#四、gcc汇编" class="headerlink" title="四、gcc汇编"></a>四、gcc汇编</h1><h2 id="1-生成汇编代码"><a href="#1-生成汇编代码" class="headerlink" title="1. 生成汇编代码"></a>1. 生成汇编代码</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-S 生成.s结尾的汇编代码文件</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-fverbose-asm 将变量名称作为注释</span></span><br><span class="line">gcc -S -fverbose-asm xxx.c</span><br></pre></td></tr></table></figure></div><div class="reward-container"><div></div><button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'>打赏</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="/images/wechatpay.png" alt="王钰博 微信支付"><p>微信支付</p></div><div style="display:inline-block"><img src="/images/alipay.jpg" alt="王钰博 支付宝"><p>支付宝</p></div></div></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-item"><a href="/blogs/2019-04-16-stm32cubemxDebug/" rel="prev" title="stm32cubemx踩坑记"><i class="fa fa-chevron-left"></i> stm32cubemx踩坑记</a></div><div class="post-nav-item"><a href="/blogs/2019-04-25-createOS30daysNotes/" rel="next" title="30天自制操作系统笔记">30天自制操作系统笔记 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>window.addEventListener("tabs:register",()=>{let{activeClass:t}=CONFIG.comments;if(CONFIG.comments.storage&&(t=localStorage.getItem("comments_active")||t),t){let e=document.querySelector(`a[href="#comment-${t}"]`);e&&e.click()}}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{if(!t.target.matches(".tabs-comment .tab-content .tab-pane"))return;let e=t.target.classList[1];localStorage.setItem("comments_active",e)})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E6%B1%87%E7%BC%96%E9%80%9A%E7%94%A8"><span class="nav-text">一、汇编通用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E8%AF%AD%E6%B3%95"><span class="nav-text">1. 语法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8C%E3%80%81nask%E6%B1%87%E7%BC%96"><span class="nav-text">二、nask汇编</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E6%8C%87%E4%BB%A4%E4%BB%8B%E7%BB%8D"><span class="nav-text">1. 指令介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-MOV-%E6%8C%87%E4%BB%A4%E8%AF%A6%E8%A7%A3"><span class="nav-text">1.1. MOV 指令详解</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E5%AE%9E%E7%8E%B0C%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84-void-write-mem8-char-addr-char-data"><span class="nav-text">2. 实现C语言中的 void write_mem8(char *addr, char data)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E5%AF%84%E5%AD%98%E5%99%A8%E8%A7%A3%E9%87%8A"><span class="nav-text">3. 寄存器解释</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%89%E3%80%81bios%E5%86%85%E7%BD%AE%E6%B1%87%E7%BC%96%E6%8C%87%E4%BB%A4"><span class="nav-text">三、bios内置汇编指令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E8%B0%83%E7%94%A8%E6%98%BE%E5%8D%A1%EF%BC%88INT-0x10"><span class="nav-text">1. 调用显卡（INT 0x10)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-%E6%98%BE%E7%A4%BA%E5%AD%97%E7%AC%A6"><span class="nav-text">1.1. 显示字符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-%E8%AE%BE%E7%BD%AE%E6%98%BE%E5%8D%A1%E6%98%BE%E7%A4%BA%E6%A8%A1%E5%BC%8F"><span class="nav-text">1.2. 设置显卡显示模式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E7%A3%81%E7%9B%98%E8%AF%BB%E5%86%99%EF%BC%8C%E6%89%87%E5%8C%BA%E6%A0%A1%E9%AA%8C%EF%BC%8C%E5%AF%BB%E9%81%93%E5%87%BD%E6%95%B0%EF%BC%88INT-0x13"><span class="nav-text">2. 磁盘读写，扇区校验，寻道函数（INT 0x13)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-%E5%A4%8D%E4%BD%8D%E7%A3%81%E7%9B%98"><span class="nav-text">2.1. 复位磁盘</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9B%9B%E3%80%81gcc%E6%B1%87%E7%BC%96"><span class="nav-text">四、gcc汇编</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E7%94%9F%E6%88%90%E6%B1%87%E7%BC%96%E4%BB%A3%E7%A0%81"><span class="nav-text">1. 生成汇编代码</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="王钰博" src="/images/12.jpg"><p class="site-author-name" itemprop="name">王钰博</p><div class="site-description" itemprop="description">个人博客</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">122</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">22</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">14</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/Githubwyb" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Githubwyb" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:1061322005@qq.com" title="E-Mail → mailto:1061322005@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a></span></div><div class="links-of-blogroll motion-element"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> 友情链接</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://githubwyb.github.io/bookPages/" title="https:&#x2F;&#x2F;githubwyb.github.io&#x2F;bookPages&#x2F;">markdown books</a></li></ul></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><a href="http://www.beian.miit.gov.cn/" rel="noopener" target="_blank">豫ICP备16023189号 </a><img src="/images/beian.png" style="display:inline-block"></div><div class="copyright">&copy; <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">王钰博</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-area-chart"></i> </span><span title="站点总字数">919k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">13:56</span></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动</div><div class="addthis_inline_share_toolbox"><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e1986d4e4e2d132" async></script></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-divider">|</span> <span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/medium-zoom.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/js/local-search.js"></script><script>document.querySelectorAll(".pdfobject-container").forEach(e=>{let t=e.dataset.target,a="#"+Object.entries({navpanes:0,toolbar:0,statusbar:0,pagemode:"thumbs",view:"FitH"}).map(([e,t])=>`${e}=${encodeURIComponent(t)}`).join("&"),i=`/lib/pdf/web/viewer.html?file=${encodeURIComponent(t)}${a}`;NexT.utils.supportsPDFs()?e.innerHTML=`<embed class="pdfobject" src="${t+a}" type="application/pdf" style="height: ${e.dataset.height};">`:e.innerHTML=`<iframe src="${i}" style="height: ${e.dataset.height};" frameborder="0"></iframe>`})</script><script>"undefined"==typeof MathJax?(window.MathJax={loader:{source:{"[tex]/amsCd":"[tex]/amscd","[tex]/AMScd":"[tex]/amscd"}},tex:{inlineMath:{"[+]":[["$","$"]]},tags:"ams"},options:{renderActions:{findScript:[10,e=>{document.querySelectorAll('script[type^="math/tex"]').forEach(t=>{const a=!!t.type.match(/; *mode=display/),n=new e.options.MathItem(t.textContent,e.inputJax[0],a),d=document.createTextNode("");t.parentNode.replaceChild(d,t),n.start={node:d,delim:"",n:0},n.end={node:d,delim:"",n:0},e.math.push(n)})},"",!1],insertedScript:[200,()=>{document.querySelectorAll("mjx-container").forEach(e=>{let t=e.parentNode;"li"===t.nodeName.toLowerCase()&&t.parentNode.classList.add("has-jax")})},"",!1]}}},function(){var e=document.createElement("script");e.src="/lib/mathjax/tex-mml-chtml.js",e.defer=!0,document.head.appendChild(e)}()):(MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typeset())</script><script>NexT.utils.loadComments(document.querySelector("#valine-comments"),()=>{NexT.utils.getScript("//unpkg.com/valine/dist/Valine.min.js",()=>{var e=["nick","mail","link"],a="nick,mail";a=a.split(",").filter(a=>e.includes(a)),new Valine({el:"#valine-comments",verify:!1,notify:!1,appId:"qmLbUHV1HOr841BOYkl84riu-gzGzoHsz",appKey:"j4fgTcf1yHRDD5X3HUH5EH95",placeholder:"^_^ happy everyday!",avatar:"wavatar",meta:a,pageSize:"10",visitor:!1,lang:"zh-cn",path:location.pathname,recordIP:!1,serverURLs:""})},window.Valine)})</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":true,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"bottom":-30,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body><script type="text/javascript" src="/lib/jquery-3.4.1.min.js"></script><script type="text/javascript" src="/js/src/love.js"></script></html>