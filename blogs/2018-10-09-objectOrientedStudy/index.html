<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-diy.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-diy.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-diy.png"><link rel="mask-icon" href="/images/logo-diy.svg" color="#222"><meta name="baidu-site-verification" content="y1cfESbTt9nd3LsA"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/lib/pace/pace-theme-flash.min.css"><script src="/lib/pace/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"githubwyb.github.io",root:"/",scheme:"Pisces",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!0,color:"#ff0000",save:"auto"},fancybox:!1,mediumzoom:!0,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="一、面向对象基本概念 三大特性：封装-继承-多态 一些相关的重要概念：抽象-组合-动态绑定-消息传递  1. 类之间的关系1.1. 组合 整体拥有部件，部件生命周期跟随整体 部件仅能被一个整体拥有  1.2. 聚合 整体拥有部件，但是部件生命周期不随整体 部件可以被多个整体拥有  二、设计模式由面向对象基本特性得来的设计模式包括三类23种，如下所示： 设计原则 OCP-开放封闭原则: 模块本身实现"><meta property="og:type" content="article"><meta property="og:title" content="面向对象学习笔记"><meta property="og:url" content="https://githubwyb.github.io/blogs/2018-10-09-objectOrientedStudy/index.html"><meta property="og:site_name" content="技术的路上奔跑"><meta property="og:description" content="一、面向对象基本概念 三大特性：封装-继承-多态 一些相关的重要概念：抽象-组合-动态绑定-消息传递  1. 类之间的关系1.1. 组合 整体拥有部件，部件生命周期跟随整体 部件仅能被一个整体拥有  1.2. 聚合 整体拥有部件，但是部件生命周期不随整体 部件可以被多个整体拥有  二、设计模式由面向对象基本特性得来的设计模式包括三类23种，如下所示： 设计原则 OCP-开放封闭原则: 模块本身实现"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://githubwyb.github.io/blogs/2018-10-09-objectOrientedStudy/2020-07-18-01.png"><meta property="og:image" content="https://githubwyb.github.io/blogs/2018-10-09-objectOrientedStudy/2020-07-19-01.png"><meta property="og:image" content="https://githubwyb.github.io/blogs/2018-10-09-objectOrientedStudy/2020-07-12-01.png"><meta property="article:published_time" content="2018-10-09T05:29:10.000Z"><meta property="article:modified_time" content="2023-10-15T02:28:27.307Z"><meta property="article:author" content="王钰博"><meta property="article:tag" content="wyb"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://githubwyb.github.io/blogs/2018-10-09-objectOrientedStudy/2020-07-18-01.png"><link rel="canonical" href="https://githubwyb.github.io/blogs/2018-10-09-objectOrientedStudy/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>面向对象学习笔记 | 技术的路上奔跑</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">技术的路上奔跑</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">入门</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-fw fa-sitemap"></i>站点地图</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a> <a href="https://github.com/Githubwyb" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://githubwyb.github.io/blogs/2018-10-09-objectOrientedStudy/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/12.jpg"><meta itemprop="name" content="王钰博"><meta itemprop="description" content="个人博客"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="技术的路上奔跑"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">面向对象学习笔记</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-10-09 13:29:10" itemprop="dateCreated datePublished" datetime="2018-10-09T13:29:10+08:00">2018-10-09</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2023-10-15 10:28:27" itemprop="dateModified" datetime="2023-10-15T10:28:27+08:00">2023-10-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Knowledge/" itemprop="url" rel="index"><span itemprop="name">Knowledge</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Knowledge/Study/" itemprop="url" rel="index"><span itemprop="name">Study</span></a> </span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span id="busuanzi_value_page_pv"></span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><span class="post-meta-item-text">Valine：</span> <a title="valine" href="/blogs/2018-10-09-objectOrientedStudy/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/blogs/2018-10-09-objectOrientedStudy/" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>14k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>13 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="一、面向对象基本概念"><a href="#一、面向对象基本概念" class="headerlink" title="一、面向对象基本概念"></a>一、面向对象基本概念</h1><ol><li>三大特性：封装-继承-多态</li><li>一些相关的重要概念：抽象-组合-动态绑定-消息传递</li></ol><h2 id="1-类之间的关系"><a href="#1-类之间的关系" class="headerlink" title="1. 类之间的关系"></a>1. 类之间的关系</h2><h3 id="1-1-组合"><a href="#1-1-组合" class="headerlink" title="1.1. 组合"></a>1.1. 组合</h3><ul><li>整体拥有部件，部件生命周期跟随整体</li><li>部件仅能被一个整体拥有</li></ul><h3 id="1-2-聚合"><a href="#1-2-聚合" class="headerlink" title="1.2. 聚合"></a>1.2. 聚合</h3><ul><li>整体拥有部件，但是部件生命周期不随整体</li><li>部件可以被多个整体拥有</li></ul><h1 id="二、设计模式"><a href="#二、设计模式" class="headerlink" title="二、设计模式"></a>二、设计模式</h1><p>由面向对象基本特性得来的设计模式包括三类23种，如下所示：</p><h2 id="设计原则"><a href="#设计原则" class="headerlink" title="设计原则"></a>设计原则</h2><ol><li>OCP-开放封闭原则: 模块本身实现是封闭的，变化通过扩展进行而不是修改内部逻辑</li><li>LSP-里氏代换原则: 子类可以完全替换父类</li><li>DIP-依赖倒转原则: 抽象不应依赖细节，细节应依赖抽象（面向接口）</li><li>ISP-接口隔离原则: 一个类对另外一个类的依赖应当建立在最小的接口上</li><li>CARP-合成&#x2F;聚合复用原则: 尽量使用合成&#x2F;聚合，尽量不要使用继承（因继承是强偶合）</li><li>LoD-迪米特法则: 若两个类不必直接通信，则不应直接交互。成员该私有要私有</li><li>SRP-单一职责原则: 就一个类而言，应该仅有一个引起它变化的原因</li><li>封装变化点，分析需求上的易变点和不变点，将易变的封装成类</li></ol><h2 id="A．创建型模式"><a href="#A．创建型模式" class="headerlink" title="A．创建型模式"></a>A．创建型模式</h2><h3 id="1-工厂方法模式（虚拟构造子模式-多态性工厂模式）"><a href="#1-工厂方法模式（虚拟构造子模式-多态性工厂模式）" class="headerlink" title="1. 工厂方法模式（虚拟构造子模式&#x2F;多态性工厂模式）"></a>1. 工厂方法模式（虚拟构造子模式&#x2F;多态性工厂模式）</h3><img src="2020-07-18-01.png"> 定义一个创建实例对象的工厂接口，将实际创建工作推迟到子类中。<p><strong>适用场景</strong></p><ol><li>如果一个类的构造函数比较复杂，需要进行各种判断和查询等，建议使用工厂模式，将类的构造变简单可拓展</li><li>如果期望类的实现未来变化，将使用新的类进行替换，可以使用工厂模式，后续直接使用v2替换工厂里面的new，一般接口和实现分离的库使用工厂模式</li><li>如果一个抽象类有多种实现，各种实现仅对外提供一个抽象接口类，可以使用工厂根据不同的类型返回不同的子类实现</li><li>类似下面结构</li></ol> <?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="364px" preserveAspectRatio="none" style="width:249px;height:364px;background:#fff" version="1.1" viewBox="0 0 249 364" width="249px" zoomAndPan="magnify" class="kroki">$2<defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="28" x="103.5" y="22.9951">&#31867;&#22270;</text><g id="elem_ITest"><rect codeLine="3" fill="#F1F1F1" height="64.2969" id="ITest" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:.5" width="100" x="74" y="44.2969"/><ellipse cx="104.3" cy="60.2969" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1"/><path d="M100.2219,56.0625 L100.2219,53.9063 L107.6125,53.9063 L107.6125,56.0625 L105.1438,56.0625 L105.1438,64.1406 L107.6125,64.1406 L107.6125,66.2969 L100.2219,66.2969 L100.2219,64.1406 L102.6906,64.1406 L102.6906,56.0625 L100.2219,56.0625 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="34" x="121.7" y="65.1436">ITest</text><line style="stroke:#181818;stroke-width:.5" x1="75" x2="173" y1="76.2969" y2="76.2969"/><line style="stroke:#181818;stroke-width:.5" x1="75" x2="173" y1="84.2969" y2="84.2969"/><ellipse cx="85" cy="97.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="74" x="94" y="101.292">test(): void</text></g><g id="elem_testImpl1"><rect codeLine="7" fill="#F1F1F1" height="64.2969" id="testImpl1" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:.5" width="100" x="142" y="168.5969"/><ellipse cx="158.8" cy="184.5969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1"/><path d="M161.7688,190.2375 Q161.1906,190.5344 160.55,190.675 Q159.9094,190.8312 159.2063,190.8312 Q156.7063,190.8312 155.3781,189.1906 Q154.0656,187.5344 154.0656,184.4094 Q154.0656,181.2844 155.3781,179.6281 Q156.7063,177.9719 159.2063,177.9719 Q159.9094,177.9719 160.55,178.1281 Q161.2063,178.2844 161.7688,178.5812 L161.7688,181.3 Q161.1438,180.7219 160.55,180.4562 Q159.9563,180.175 159.3313,180.175 Q157.9875,180.175 157.3,181.2531 Q156.6125,182.3156 156.6125,184.4094 Q156.6125,186.5031 157.3,187.5812 Q157.9875,188.6437 159.3313,188.6437 Q159.9563,188.6437 160.55,188.3781 Q161.1438,188.0969 161.7688,187.5187 L161.7688,190.2375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="173.2" y="189.4436">testImpl1</text><line style="stroke:#181818;stroke-width:.5" x1="143" x2="241" y1="200.5969" y2="200.5969"/><line style="stroke:#181818;stroke-width:.5" x1="143" x2="241" y1="208.5969" y2="208.5969"/><ellipse cx="153" cy="222.2453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="162" y="225.592">test(): void</text></g><g id="elem_testImpl2"><rect codeLine="11" fill="#F1F1F1" height="64.2969" id="testImpl2" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:.5" width="100" x="7" y="168.5969"/><ellipse cx="23.8" cy="184.5969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1"/><path d="M26.7688,190.2375 Q26.1906,190.5344 25.55,190.675 Q24.9094,190.8312 24.2063,190.8312 Q21.7063,190.8312 20.3781,189.1906 Q19.0656,187.5344 19.0656,184.4094 Q19.0656,181.2844 20.3781,179.6281 Q21.7063,177.9719 24.2063,177.9719 Q24.9094,177.9719 25.55,178.1281 Q26.2063,178.2844 26.7688,178.5812 L26.7688,181.3 Q26.1438,180.7219 25.55,180.4562 Q24.9563,180.175 24.3313,180.175 Q22.9875,180.175 22.3,181.2531 Q21.6125,182.3156 21.6125,184.4094 Q21.6125,186.5031 22.3,187.5812 Q22.9875,188.6437 24.3313,188.6437 Q24.9563,188.6437 25.55,188.3781 Q26.1438,188.0969 26.7688,187.5187 L26.7688,190.2375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="38.2" y="189.4436">testImpl2</text><line style="stroke:#181818;stroke-width:.5" x1="8" x2="106" y1="200.5969" y2="200.5969"/><line style="stroke:#181818;stroke-width:.5" x1="8" x2="106" y1="208.5969" y2="208.5969"/><ellipse cx="18" cy="222.2453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="27" y="225.592">test(): void</text></g><g id="elem_testFactory"><rect codeLine="15" fill="#F1F1F1" height="64.2969" id="testFactory" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:.5" width="123" x="62.5" y="292.8869"/><ellipse cx="83.8" cy="308.8869" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1"/><path d="M86.7688,314.5275 Q86.1906,314.8244 85.55,314.965 Q84.9094,315.1213 84.2063,315.1213 Q81.7063,315.1213 80.3781,313.4806 Q79.0656,311.8244 79.0656,308.6994 Q79.0656,305.5744 80.3781,303.9181 Q81.7063,302.2619 84.2063,302.2619 Q84.9094,302.2619 85.55,302.4181 Q86.2063,302.5744 86.7688,302.8713 L86.7688,305.59 Q86.1438,305.0119 85.55,304.7463 Q84.9563,304.465 84.3313,304.465 Q82.9875,304.465 82.3,305.5431 Q81.6125,306.6056 81.6125,308.6994 Q81.6125,310.7931 82.3,311.8713 Q82.9875,312.9338 84.3313,312.9338 Q84.9563,312.9338 85.55,312.6681 Q86.1438,312.3869 86.7688,311.8088 L86.7688,314.5275 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="99.2" y="313.7336">testFactory</text><line style="stroke:#181818;stroke-width:.5" x1="63.5" x2="184.5" y1="324.8869" y2="324.8869"/><line style="stroke:#181818;stroke-width:.5" x1="63.5" x2="184.5" y1="332.8869" y2="332.8869"/><ellipse cx="73.5" cy="346.5353" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="97" x="82.5" y="349.882">create(): ITest</text></g><g id="link_ITest_testImpl1"><path d="M150.2552,124.6697 C160.4052,142.9297 164.41,150.1169 174.55,168.3569 " fill="none" id="ITest-backto-testImpl1" style="stroke:#181818;stroke-width:1"/><polygon fill="none" points="141.51,108.9369,145.011,127.5848,155.4995,121.7546,141.51,108.9369" style="stroke:#181818;stroke-width:1"/></g><g id="link_ITest_testImpl2"><path d="M98.0974,124.7208 C88.0874,142.9808 84.19,150.1169 74.2,168.3569 " fill="none" id="ITest-backto-testImpl2" style="stroke:#181818;stroke-width:1"/><polygon fill="none" points="106.75,108.9369,92.8361,121.8366,103.3587,127.605,106.75,108.9369" style="stroke:#181818;stroke-width:1"/></g><g id="link_testImpl1_testFactory"><path codeLine="19" d="M171.5749,238.4811 C161.4249,256.7411 151.59,274.4069 141.45,292.6469 " fill="none" id="testImpl1-backto-testFactory" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7"/><polygon fill="#181818" points="174.49,233.2369,166.6212,239.1599,172.0608,237.6071,173.6136,243.0467,174.49,233.2369" style="stroke:#181818;stroke-width:1"/></g><g id="link_testImpl2_testFactory"><path codeLine="20" d="M77.1342,238.4982 C87.1442,256.7582 96.81,274.4069 106.8,292.6469 " fill="none" id="testImpl2-backto-testFactory" style="stroke:#181818;stroke-width:1;stroke-dasharray:7,7"/><polygon fill="#181818" points="74.25,233.2369,75.0688,243.0516,76.6535,237.6213,82.0839,239.206,74.25,233.2369" style="stroke:#181818;stroke-width:1"/></g></g></svg><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义接口Product，定义接口存在方法Use</span></span><br><span class="line"><span class="keyword">type</span> Product <span class="keyword">interface</span> &#123;</span><br><span class="line">	Use()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// productA继承Product，但外部不可见</span></span><br><span class="line"><span class="keyword">type</span> productA <span class="keyword">struct</span> &#123;</span><br><span class="line">	Product</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// productB继承Product，但外部不可见</span></span><br><span class="line"><span class="keyword">type</span> productB <span class="keyword">struct</span> &#123;</span><br><span class="line">	Product</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *productA)</span></span> Use() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;ProductA&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *productB)</span></span> Use() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;ProductB&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对外暴露工厂方法，根据参数创建不同的产品</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ProductFactory</span><span class="params">(name <span class="type">string</span>)</span></span> Product &#123;</span><br><span class="line">	<span class="keyword">switch</span> name &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;A&quot;</span>:</span><br><span class="line">		<span class="keyword">return</span> &amp;productA&#123;&#125;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;B&quot;</span>:</span><br><span class="line">		<span class="keyword">return</span> &amp;productB&#123;&#125;</span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Hello world&quot;</span>)</span><br><span class="line"></span><br><span class="line">	product := ProductFactory(<span class="string">&quot;A&quot;</span>)</span><br><span class="line">	product.Use()</span><br><span class="line">	product = ProductFactory(<span class="string">&quot;B&quot;</span>)</span><br><span class="line">	product.Use()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-抽象工厂模式"><a href="#2-抽象工厂模式" class="headerlink" title="2. 抽象工厂模式"></a>2. 抽象工厂模式</h3><img src="2020-07-19-01.png"><p>最为抽象最具一般性，向客户端提供一个接口，使客户端在不必指定实例的具体类型的情况下创建多个实例族的实例对象。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个抽象工厂</span></span><br><span class="line"><span class="keyword">type</span> AbstractFactory <span class="keyword">interface</span> &#123;</span><br><span class="line">	CreateProduct(name <span class="type">string</span>) Product</span><br><span class="line">	CreateWorker(name <span class="type">string</span>) Worker</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义产品</span></span><br><span class="line"><span class="keyword">type</span> Product <span class="keyword">interface</span> &#123;</span><br><span class="line">	Use()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子类产品A</span></span><br><span class="line"><span class="keyword">type</span> productA <span class="keyword">struct</span> &#123;</span><br><span class="line">	Product</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子类产品B</span></span><br><span class="line"><span class="keyword">type</span> productB <span class="keyword">struct</span> &#123;</span><br><span class="line">	Product</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *productA)</span></span> Use() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;productA&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *productB)</span></span> Use() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;productB&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义产品工厂，生产产品</span></span><br><span class="line"><span class="keyword">type</span> ProductFactory <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ProductFactory)</span></span> CreateProduct(name <span class="type">string</span>) Product &#123;</span><br><span class="line">	<span class="keyword">if</span> name == <span class="string">&quot;A&quot;</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> &amp;productA&#123;&#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> name == <span class="string">&quot;B&quot;</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> &amp;productB&#123;&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现抽象工厂接口，但是没有具体实现</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ProductFactory)</span></span> CreateWorker(name <span class="type">string</span>) Worker &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义工人</span></span><br><span class="line"><span class="keyword">type</span> Worker <span class="keyword">interface</span> &#123;</span><br><span class="line">	Work()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子类工人A</span></span><br><span class="line"><span class="keyword">type</span> workerA <span class="keyword">struct</span> &#123;</span><br><span class="line">	Worker</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子类工人B</span></span><br><span class="line"><span class="keyword">type</span> workerB <span class="keyword">struct</span> &#123;</span><br><span class="line">	Worker</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(w *workerA)</span></span> Work() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;workerA&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(w *workerB)</span></span> Work() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;workerB&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义工人工厂</span></span><br><span class="line"><span class="keyword">type</span> WorkerFactory <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *WorkerFactory)</span></span> CreateWorker(name <span class="type">string</span>) Worker &#123;</span><br><span class="line">	<span class="keyword">if</span> name == <span class="string">&quot;A&quot;</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> &amp;workerA&#123;&#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> name == <span class="string">&quot;B&quot;</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> &amp;workerB&#123;&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现抽象工厂接口，但是没有具体实现</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *WorkerFactory)</span></span> CreateProduct(name <span class="type">string</span>) Product &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用接口创建具体工厂</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetFactory</span><span class="params">(factoryType <span class="type">string</span>)</span></span> AbstractFactory &#123;</span><br><span class="line">	<span class="keyword">if</span> factoryType == <span class="string">&quot;product&quot;</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> &amp;ProductFactory&#123;&#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> factoryType == <span class="string">&quot;worker&quot;</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> &amp;WorkerFactory&#123;&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 使用抽象工厂创建产品工厂</span></span><br><span class="line">	productFactory := GetFactory(<span class="string">&quot;product&quot;</span>)</span><br><span class="line">	productFactory.CreateProduct(<span class="string">&quot;A&quot;</span>).Use()</span><br><span class="line">	productFactory.CreateProduct(<span class="string">&quot;B&quot;</span>).Use()</span><br><span class="line">	<span class="comment">// 使用抽象工厂创建工人工厂</span></span><br><span class="line">	workerFactory := GetFactory(<span class="string">&quot;worker&quot;</span>)</span><br><span class="line">	workerFactory.CreateWorker(<span class="string">&quot;A&quot;</span>).Work()</span><br><span class="line">	workerFactory.CreateWorker(<span class="string">&quot;B&quot;</span>).Work()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-单例模式"><a href="#3-单例模式" class="headerlink" title="3. 单例模式"></a>3. <span id="instance">单例模式</span></h3><p>单例模式一般是用来让整个进程只有一个，一般是管理类。进程只有一个，再多线程情况下就需要考虑线程安全。常见的单例模式一般分为懒汉模式和饿汉模式。</p><p><strong>懒汉模式</strong></p><p>顾名思义，懒，就是用的时候才建立，不用不建立。分为线程安全的实现和非线程安全的实现，线程安全的实现会影响性能。一般由于两种线程安全的实现。</p><ul><li>单纯加锁</li><li>双重判断</li></ul><p><strong>饿汉模式</strong></p><p>开场就饿，进程开始就创建。默认就是线程安全的，但是要考虑头文件包含导致的多次创建。并且由于进程起来就创建，可能比较占用性能。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/********** 懒汉模式，非线程安全 **********/</span></span><br><span class="line"><span class="keyword">type</span> LasySingleton <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//建立私有变量</span></span><br><span class="line"><span class="keyword">var</span> instance *LasySingleton</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取单例对象的方法，引用传递返回</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetInstance</span><span class="params">()</span></span> *LasySingleton &#123;</span><br><span class="line">	<span class="keyword">if</span> instance == <span class="literal">nil</span> &#123;</span><br><span class="line">		instance = <span class="built_in">new</span>(LasySingleton)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> instance</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/********** 懒汉模式，线程安全 **********/</span></span><br><span class="line"><span class="keyword">type</span> SafeSingleton <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> safeInstance *SafeSingleton</span><br><span class="line"><span class="keyword">var</span> once sync.Once</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetSafeInstance</span><span class="params">()</span></span> *SafeSingleton &#123;</span><br><span class="line">	once.Do(<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		safeInstance = <span class="built_in">new</span>(SafeSingleton)</span><br><span class="line">	&#125;)</span><br><span class="line">	<span class="keyword">return</span> safeInstance</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/********** 饿汉模式，线程安全 **********/</span></span><br><span class="line"><span class="keyword">type</span> HungrySingleton <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> hungrySingleton *HungrySingleton = <span class="built_in">new</span>(HungrySingleton)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetHungrySingleton</span><span class="params">()</span></span> *HungrySingleton &#123;</span><br><span class="line">	<span class="keyword">return</span> hungrySingleton</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 懒汉模式，非线程安全</span></span><br><span class="line">	instance1 := GetInstance()</span><br><span class="line">	instance2 := GetInstance()</span><br><span class="line">	<span class="keyword">if</span> instance1 == instance2 &#123;</span><br><span class="line">		<span class="built_in">println</span>(<span class="string">&quot;instance1 == instance2&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 懒汉模式，线程安全</span></span><br><span class="line">	instance3 := GetSafeInstance()</span><br><span class="line">	instance4 := GetSafeInstance()</span><br><span class="line">	<span class="keyword">if</span> instance3 == instance4 &#123;</span><br><span class="line">		<span class="built_in">println</span>(<span class="string">&quot;instance3 == instance4&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 饿汉模式，线程安全</span></span><br><span class="line">	instance5 := GetHungrySingleton()</span><br><span class="line">	instance6 := GetHungrySingleton()</span><br><span class="line">	<span class="keyword">if</span> instance5 == instance6 &#123;</span><br><span class="line">		<span class="built_in">println</span>(<span class="string">&quot;instance5 == instance6&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-建造者模式"><a href="#4-建造者模式" class="headerlink" title="4. 建造者模式"></a>4. 建造者模式</h3><ul><li>将复杂对象的构建与其表示分开，使同样的构建过程可以创建不同的表示。</li></ul><p>简单来说，存在一个厨师帮你构建一顿饭，包含一个个单独的菜组合。价格和列表不是厨师需要提供的，是饭菜（菜单）提供的。厨师就是建造者，需要的实例时饭菜。需要价格和列表找饭菜要！！！</p><ul><li>主要用于将一个一个基础的实现，使用建造者进行构建成一个对外接口类</li><li>建造者只负责处理复杂的构建，需要的能力时从对外接口类获取</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义单个饭菜的接口</span></span><br><span class="line"><span class="keyword">type</span> item <span class="keyword">interface</span> &#123;</span><br><span class="line">	GetName() <span class="type">string</span></span><br><span class="line">	GetPrice() <span class="type">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义汉堡</span></span><br><span class="line"><span class="keyword">type</span> burger <span class="keyword">struct</span> &#123;</span><br><span class="line">	price <span class="type">float64</span></span><br><span class="line">	name  <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *burger)</span></span> GetName() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> b.name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *burger)</span></span> GetPrice() <span class="type">float64</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> b.price</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义饮料</span></span><br><span class="line"><span class="keyword">type</span> drink <span class="keyword">struct</span> &#123;</span><br><span class="line">	price <span class="type">float64</span></span><br><span class="line">	name  <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d *drink)</span></span> GetName() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> d.name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d *drink)</span></span> GetPrice() <span class="type">float64</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> d.price</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一顿饭的接口</span></span><br><span class="line"><span class="keyword">type</span> Meal <span class="keyword">struct</span> &#123;</span><br><span class="line">	items []item</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加饭菜</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *Meal)</span></span> addItem(item item) &#123;</span><br><span class="line">	m.items = <span class="built_in">append</span>(m.items, item)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对外暴露获得价格的接口</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *Meal)</span></span> GetCost() <span class="type">float64</span> &#123;</span><br><span class="line">	<span class="keyword">var</span> cost <span class="type">float64</span></span><br><span class="line">	<span class="keyword">for</span> _, item := <span class="keyword">range</span> m.items &#123;</span><br><span class="line">		cost += item.GetPrice()</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> cost</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对外暴露获得名称的接口</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *Meal)</span></span> GetItems() []<span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">var</span> items []<span class="type">string</span></span><br><span class="line">	<span class="keyword">for</span> _, item := <span class="keyword">range</span> m.items &#123;</span><br><span class="line">		items = <span class="built_in">append</span>(items, item.GetName())</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> items</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义饭菜建造者，提供套餐</span></span><br><span class="line"><span class="keyword">type</span> MealBuilder <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 套餐A，汉堡+饮料</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *MealBuilder)</span></span> CreateMealA() Meal &#123;</span><br><span class="line">	meal := Meal&#123;&#125;</span><br><span class="line">	meal.addItem(&amp;burger&#123;price: <span class="number">10</span>, name: <span class="string">&quot;burger&quot;</span>&#125;)</span><br><span class="line">	meal.addItem(&amp;drink&#123;price: <span class="number">5</span>, name: <span class="string">&quot;drink&quot;</span>&#125;)</span><br><span class="line">	<span class="keyword">return</span> meal</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 套餐B，2个汉堡+2个饮料</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *MealBuilder)</span></span> CreateMealB() Meal &#123;</span><br><span class="line">	meal := Meal&#123;&#125;</span><br><span class="line">	meal.addItem(&amp;burger&#123;price: <span class="number">10</span>, name: <span class="string">&quot;burger&quot;</span>&#125;)</span><br><span class="line">	meal.addItem(&amp;burger&#123;price: <span class="number">10</span>, name: <span class="string">&quot;burger&quot;</span>&#125;)</span><br><span class="line">	meal.addItem(&amp;drink&#123;price: <span class="number">5</span>, name: <span class="string">&quot;drink&quot;</span>&#125;)</span><br><span class="line">	meal.addItem(&amp;drink&#123;price: <span class="number">5</span>, name: <span class="string">&quot;drink&quot;</span>&#125;)</span><br><span class="line">	<span class="keyword">return</span> meal</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	builder := MealBuilder&#123;&#125;</span><br><span class="line">	<span class="comment">// 要一个套餐A，查看价格和列表</span></span><br><span class="line">	meal := builder.CreateMealA()</span><br><span class="line">	<span class="comment">// 价格和列表都是从饭菜获取，建造者不关心，仅进行构建</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;Meal A: %s, cost: %.2f\n&quot;</span>, meal.GetItems(), meal.GetCost())</span><br><span class="line">	<span class="comment">// 要一个套餐B，查看价格和列表</span></span><br><span class="line">	meal = builder.CreateMealB()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;Meal B: %s, cost: %.2f\n&quot;</span>, meal.GetItems(), meal.GetCost())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-原型模式"><a href="#5-原型模式" class="headerlink" title="5. 原型模式"></a>5. 原型模式</h3><p>用原型实例指定创建对象的种类，并且通过拷贝这些原型创建新的对象</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义接口，需要实现clone方法</span></span><br><span class="line"><span class="keyword">type</span> Painter <span class="keyword">interface</span> &#123;</span><br><span class="line">	Clone() Painter</span><br><span class="line">	DrawCrcle()</span><br><span class="line">	SetColor(color <span class="type">string</span>)</span><br><span class="line">	GetColor() <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> PainterA <span class="keyword">struct</span> &#123;</span><br><span class="line">	color <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *PainterA)</span></span> Clone() Painter &#123;</span><br><span class="line">	<span class="keyword">return</span> &amp;PainterA&#123;p.color&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *PainterA)</span></span> DrawCrcle() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;PainterA DrawCircle&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *PainterA)</span></span> SetColor(color <span class="type">string</span>) &#123;</span><br><span class="line">	p.color = color</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *PainterA)</span></span> GetColor() <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> p.color</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 原型模式就是需要提供clone的接口，实现对对象的拷贝</span></span><br><span class="line">	a := PainterA&#123;&#125;</span><br><span class="line">	a.SetColor(<span class="string">&quot;red&quot;</span>)</span><br><span class="line">	b := a.Clone()</span><br><span class="line">	fmt.Println(b.GetColor()) <span class="comment">// red 拷贝后继承属性</span></span><br><span class="line">	b.SetColor(<span class="string">&quot;blue&quot;</span>)</span><br><span class="line">	fmt.Println(a.GetColor()) <span class="comment">// red 原对象没有改变</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="B．结构型模式"><a href="#B．结构型模式" class="headerlink" title="B．结构型模式"></a>B．结构型模式</h2><h3 id="6-适配器模式"><a href="#6-适配器模式" class="headerlink" title="6. 适配器模式"></a>6. 适配器模式</h3><ul><li>关键在于兼容，将原有接口兼容当前使用</li><li>兼容了当前框架的操作</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> module <span class="keyword">struct</span> &#123;</span><br><span class="line">	a <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *module)</span></span> start() &#123;</span><br><span class="line">	m.a = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *module)</span></span> stop() &#123;</span><br><span class="line">	m.a = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> moduleAdapter <span class="keyword">struct</span> &#123;</span><br><span class="line">	module</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *moduleAdapter)</span></span> init() &#123;</span><br><span class="line">	m.start()</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *moduleAdapter)</span></span> uninit() &#123;</span><br><span class="line">	m.stop()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	m := moduleAdapter&#123;&#125;</span><br><span class="line">	m.init()</span><br><span class="line">	m.uninit()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-组合（部分-整体）模式"><a href="#7-组合（部分-整体）模式" class="headerlink" title="7. 组合（部分-整体）模式"></a>7. 组合（部分-整体）模式</h3><p>将对象组合成树形结构以表示“部分-整体”的层次结构</p><h3 id="8-装饰器模式"><a href="#8-装饰器模式" class="headerlink" title="8. 装饰器模式"></a>8. 装饰器模式</h3><p>动态给对象添加额外职责，比通过生成子类来增加功能更加灵活</p><ul><li>关键在于加强，原始类的所有接口都进行了实现</li><li>比如存在一个接口实现了非线程安全的一些方法，使用一个装饰器将所有的方法变成线程安全的调用</li><li>比如存在一个接口实现了画图，使用一个装饰器将画的图染成红色</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义接口画家</span></span><br><span class="line"><span class="keyword">type</span> Painter <span class="keyword">interface</span> &#123;</span><br><span class="line">	DrawCircle()</span><br><span class="line">	DrawRectangle()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现一个画家</span></span><br><span class="line"><span class="keyword">type</span> PainterA <span class="keyword">struct</span> &#123;</span><br><span class="line">	Painter</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> PainterDecorator <span class="keyword">struct</span> &#123;</span><br><span class="line">	A PainterA <span class="comment">// 本身持有一个画家A</span></span><br><span class="line">	Painter</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *PainterA)</span></span> DrawCircle() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;PainterA DrawCircle&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *PainterA)</span></span> DrawRectangle() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;PainterA DrawRectangle&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *PainterDecorator)</span></span> DrawCircle() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Use red color&quot;</span>) <span class="comment">// 增加能力</span></span><br><span class="line">	p.A.DrawCircle()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *PainterDecorator)</span></span> DrawRectangle() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;Use red color&quot;</span>) <span class="comment">// 增加能力</span></span><br><span class="line">	p.A.DrawRectangle()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 使用原始画家可以进行操作</span></span><br><span class="line">	painter := &amp;PainterA&#123;&#125;</span><br><span class="line">	painter.DrawCircle()</span><br><span class="line">	painter.DrawRectangle()</span><br><span class="line">	<span class="comment">// 使用装饰器加强了画家，做同样的操作</span></span><br><span class="line">	painter1 := &amp;PainterDecorator&#123;</span><br><span class="line">		A: PainterA&#123;&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	painter1.DrawCircle()</span><br><span class="line">	painter1.DrawRectangle()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="9-代理模式"><a href="#9-代理模式" class="headerlink" title="9. 代理模式"></a>9. 代理模式</h3><ul><li>关键在于隔离，不直接访问原始对象</li><li>和装饰器不同的时，代理模式更多的是封装原始接口，但不改变原始接口的能力</li><li>比如加上日志打印或者初始化操作，这些并不改变原始接口的能力，并且可以将原始类的实现细节隐藏</li><li>装饰器并不隐藏原始实现</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义接口，但外部不可见</span></span><br><span class="line"><span class="keyword">type</span> painter <span class="keyword">interface</span> &#123;</span><br><span class="line">	init()</span><br><span class="line">	drawCircle()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义画家继承接口，同样外部不可见</span></span><br><span class="line"><span class="keyword">type</span> painterA <span class="keyword">struct</span> &#123;</span><br><span class="line">	painter</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义代理类，封装了painterA</span></span><br><span class="line"><span class="keyword">type</span> PainterProxy <span class="keyword">struct</span> &#123;</span><br><span class="line">	a painterA</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *painterA)</span></span> init() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;painterA init&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *painterA)</span></span> drawCircle() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;painterA DrawCircle&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 代理类处理了初始化，但不修改painterA的实现</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *PainterProxy)</span></span> DrawCircle() &#123;</span><br><span class="line">	<span class="keyword">if</span> p.a.painter == <span class="literal">nil</span> &#123;</span><br><span class="line">		p.a = painterA&#123;&#125;</span><br><span class="line">		p.a.init()</span><br><span class="line">	&#125;</span><br><span class="line">	p.a.drawCircle()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 使用代理类不关心内部painter实现，并且不用关心是否需要初始化</span></span><br><span class="line">	p := PainterProxy&#123;&#125;</span><br><span class="line">	p.DrawCircle()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="10-享元模式"><a href="#10-享元模式" class="headerlink" title="10. 享元模式"></a>10. 享元模式</h3><p>运用共享技术有效地支持大量的细粒度对象</p><h3 id="11-外观（门面）模式"><a href="#11-外观（门面）模式" class="headerlink" title="11. 外观（门面）模式"></a>11. 外观（门面）模式</h3><p>为一组接口提供一个一致的接口，体现了DIP和LoD原则</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个基础接口，外部不可见</span></span><br><span class="line"><span class="keyword">type</span> drawer <span class="keyword">interface</span> &#123;</span><br><span class="line">	draw()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 继承基础接口定义画圆</span></span><br><span class="line"><span class="keyword">type</span> circle <span class="keyword">struct</span> &#123;</span><br><span class="line">	drawer</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *circle)</span></span> draw() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;draw circle&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 继承基础接口定义画矩形</span></span><br><span class="line"><span class="keyword">type</span> square <span class="keyword">struct</span> &#123;</span><br><span class="line">	drawer</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *square)</span></span> draw() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;draw square&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义外观模型，将画圆和画矩形封装起来</span></span><br><span class="line"><span class="keyword">type</span> Facade <span class="keyword">struct</span> &#123;</span><br><span class="line">	circleDrawer circle</span><br><span class="line">	squareDrawer square</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现画圆的接口</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *Facade)</span></span> DrawCircle() &#123;</span><br><span class="line">	<span class="keyword">if</span> f.circleDrawer.drawer == <span class="literal">nil</span> &#123;</span><br><span class="line">		f.circleDrawer = circle&#123;&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	f.circleDrawer.draw()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现画矩形的接口</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *Facade)</span></span> DrawSquare() &#123;</span><br><span class="line">	<span class="keyword">if</span> f.squareDrawer.drawer == <span class="literal">nil</span> &#123;</span><br><span class="line">		f.squareDrawer = square&#123;&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	f.squareDrawer.draw()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	facade := &amp;Facade&#123;&#125;</span><br><span class="line">	facade.DrawCircle()</span><br><span class="line">	facade.DrawSquare()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="12-桥接模式"><a href="#12-桥接模式" class="headerlink" title="12. 桥接模式"></a>12. 桥接模式</h3><p>将抽象部分与其实现部分分离，使它们都可以独立变化，可实现多角度分类</p><h2 id="C．行为型模式"><a href="#C．行为型模式" class="headerlink" title="C．行为型模式"></a>C．行为型模式</h2><h3 id="13-策略模式"><a href="#13-策略模式" class="headerlink" title="13. 策略模式"></a>13. 策略模式</h3><ul><li>定义一种策略，比如从A到B</li><li>使用多个方法进行实现此策略，比如飞机、汽车、走路</li><li>使用者自己选择方法，调用同一个策略进行执行</li><li>本质是封装公共的调用逻辑和方法，如超市的接口方法为算要付多少钱，但是存在不同的策略，如打几折，满多少送多少等</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义策略接口，公共方法为执行策略</span></span><br><span class="line"><span class="keyword">type</span> Strategy <span class="keyword">interface</span> &#123;</span><br><span class="line">	run()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义策略A继承策略</span></span><br><span class="line"><span class="keyword">type</span> StrategyA <span class="keyword">struct</span> &#123;</span><br><span class="line">	Strategy</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义策略B继承策略</span></span><br><span class="line"><span class="keyword">type</span> StrategyB <span class="keyword">struct</span> &#123;</span><br><span class="line">	Strategy</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现具体的执行策略的方式</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *StrategyA)</span></span> run() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;StrategyA&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现具体的执行策略的方式</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *StrategyB)</span></span> run() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;StrategyB&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对外仅有一个公共的执行策略的流程，如调用run</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">RunStrategy</span><span class="params">(s Strategy)</span></span> &#123;</span><br><span class="line">	s.run()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 使用策略A，调用公共执行流程</span></span><br><span class="line">	strategy.RunStrategy(&amp;strategy.StrategyA&#123;&#125;)</span><br><span class="line">	<span class="comment">// 使用策略B，调用公共执行流程</span></span><br><span class="line">	strategy.RunStrategy(&amp;strategy.StrategyB&#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="14-模板方法模式"><a href="#14-模板方法模式" class="headerlink" title="14. 模板方法模式"></a>14. 模板方法模式</h3><p>定义一个操作中算法的骨架，而将一些具体步骤延迟到子类</p><ul><li>可以认为是一个模板类实现了公共的逻辑，子类只需要实现非公用逻辑即可</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义接口</span></span><br><span class="line"><span class="keyword">type</span> Product <span class="keyword">interface</span> &#123;</span><br><span class="line">	Use()</span><br><span class="line">	Print()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义模板继承</span></span><br><span class="line"><span class="keyword">type</span> ProductTemplate <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="type">string</span></span><br><span class="line">	Product</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义产品A，继承模板</span></span><br><span class="line"><span class="keyword">type</span> ProductA <span class="keyword">struct</span> &#123;</span><br><span class="line">	ProductTemplate</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义产品B，继承模板</span></span><br><span class="line"><span class="keyword">type</span> ProductB <span class="keyword">struct</span> &#123;</span><br><span class="line">	ProductTemplate</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模板实现公共接口</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *ProductTemplate)</span></span> Print() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;name&quot;</span>, p.Name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *ProductA)</span></span> Use() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;ProductA use&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *ProductB)</span></span> Use() &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;ProductB use&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p := ProductA&#123;</span><br><span class="line">		ProductTemplate: ProductTemplate&#123;</span><br><span class="line">			Name: <span class="string">&quot;ProductA&quot;</span>,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	p.Use()</span><br><span class="line">	p.Print()</span><br><span class="line">	p1 := ProductB&#123;</span><br><span class="line">		ProductTemplate: ProductTemplate&#123;</span><br><span class="line">			Name: <span class="string">&quot;ProductB&quot;</span>,</span><br><span class="line">		&#125;&#125;</span><br><span class="line">	p1.Use()</span><br><span class="line">	p1.Print()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="15-观察者模式-发布-订阅模式"><a href="#15-观察者模式-发布-订阅模式" class="headerlink" title="15. 观察者模式(发布-订阅模式)"></a>15. 观察者模式(发布-订阅模式)</h3><p>定义一种一对多的依赖关系，让多个观察者对象同时监听某一个通知者对象</p><img src="2020-07-12-01.png"><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个产品，内部存在一个观察者列表</span></span><br><span class="line"><span class="keyword">type</span> Product <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name         <span class="type">string</span></span><br><span class="line">	observerList []Observer</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义观察者接口</span></span><br><span class="line"><span class="keyword">type</span> Observer <span class="keyword">interface</span> &#123;</span><br><span class="line">	Update(product *Product)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Product)</span></span> AddObserver(observer Observer) &#123;</span><br><span class="line">	p.observerList = <span class="built_in">append</span>(p.observerList, observer)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Product)</span></span> SetName(name <span class="type">string</span>) &#123;</span><br><span class="line">	p.Name = name</span><br><span class="line">	<span class="comment">// 名字变化后，通知所有观察者</span></span><br><span class="line">	<span class="keyword">for</span> _, observer := <span class="keyword">range</span> p.observerList &#123;</span><br><span class="line">		observer.Update(p)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个观察者A</span></span><br><span class="line"><span class="keyword">type</span> ObserverA <span class="keyword">struct</span> &#123;</span><br><span class="line">	Observer</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现更新方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(o *ObserverA)</span></span> Update(product *Product) &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;ObserverA: %s\n&quot;</span>, product.Name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个观察者B</span></span><br><span class="line"><span class="keyword">type</span> ObserverB <span class="keyword">struct</span> &#123;</span><br><span class="line">	Observer</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(o *ObserverB)</span></span> Update(product *Product) &#123;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;ObserverB: %s\n&quot;</span>, product.Name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 创建一个产品</span></span><br><span class="line">	product := &amp;Product&#123;&#125;</span><br><span class="line">	<span class="comment">// 创建观察者A</span></span><br><span class="line">	observerA := &amp;ObserverA&#123;&#125;</span><br><span class="line">	<span class="comment">// 创建观察者B</span></span><br><span class="line">	observerB := &amp;ObserverB&#123;&#125;</span><br><span class="line">	<span class="comment">// 将观察者A添加到产品中</span></span><br><span class="line">	product.AddObserver(observerA)</span><br><span class="line">	<span class="comment">// 将观察者B添加到产品中</span></span><br><span class="line">	product.AddObserver(observerB)</span><br><span class="line">	<span class="comment">// 修改产品名字</span></span><br><span class="line">	product.SetName(<span class="string">&quot;productA&quot;</span>)</span><br><span class="line">	<span class="comment">// 修改产品名字</span></span><br><span class="line">	product.SetName(<span class="string">&quot;productB&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="16-迭代器模式"><a href="#16-迭代器模式" class="headerlink" title="16. 迭代器模式"></a>16. 迭代器模式</h3><p>提供顺序访问一个聚合中元素的方法。不常用，因为语言本身已内置</p><h3 id="17-职责链模式"><a href="#17-职责链模式" class="headerlink" title="17. 职责链模式"></a>17. 职责链模式</h3><p>使多个对象都有机会获得机会处理请求。这些对象连成一条链。减少请求得与接收者的耦合。如过滤器</p><h3 id="18-命令模式"><a href="#18-命令模式" class="headerlink" title="18. 命令模式"></a>18. 命令模式</h3><p>将请求封装成一个对象，以使你可用不同的请求对客户端进行参数化；可对请求进行排除、记录日志、或撤销操作</p><h3 id="19-备忘录模式"><a href="#19-备忘录模式" class="headerlink" title="19. 备忘录模式"></a>19. 备忘录模式</h3><p>在不破坏封装的前提下捕获一个对象的内部状态，并在该对象外部保存此状态</p><h3 id="20-状态模式"><a href="#20-状态模式" class="headerlink" title="20. 状态模式"></a>20. 状态模式</h3><p>当一个状态改变时，允许改变其行为，看其来像是改变了其类。（将复杂的条件判断转移到多个小类中）</p><h3 id="21-访问者模式"><a href="#21-访问者模式" class="headerlink" title="21. 访问者模式"></a>21. 访问者模式</h3><p>表示一个作用于某对象结构中的各元素的操作。把数据处理与数据结构分开</p><h3 id="22-解释器模式"><a href="#22-解释器模式" class="headerlink" title="22. 解释器模式"></a>22. 解释器模式</h3><p>对一个语言定义一个文法的表示，并定义一个解释器，来解释语言中的句子，如正则表达式，浏览器。通过解释执行</p><h3 id="23-中介者-调停者-模式"><a href="#23-中介者-调停者-模式" class="headerlink" title="23. 中介者(调停者)模式"></a>23. 中介者(调停者)模式</h3><p>用一个中介对象来封装一系列的对象交互。应用于星形结构的对象关系中</p></div><div class="reward-container"><div></div><button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'>打赏</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="/images/wechatpay.png" alt="王钰博 微信支付"><p>微信支付</p></div><div style="display:inline-block"><img src="/images/alipay.jpg" alt="王钰博 支付宝"><p>支付宝</p></div></div></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-item"><a href="/blogs/2018-10-08-markdownStudy/" rel="prev" title="markdown学习笔记"><i class="fa fa-chevron-left"></i> markdown学习笔记</a></div><div class="post-nav-item"><a href="/blogs/2018-10-10-interviewQuestion/" rel="next" title="面试可以问的问题">面试可以问的问题 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>window.addEventListener("tabs:register",()=>{let{activeClass:t}=CONFIG.comments;if(CONFIG.comments.storage&&(t=localStorage.getItem("comments_active")||t),t){let e=document.querySelector(`a[href="#comment-${t}"]`);e&&e.click()}}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{if(!t.target.matches(".tabs-comment .tab-content .tab-pane"))return;let e=t.target.classList[1];localStorage.setItem("comments_active",e)})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-text">一、面向对象基本概念</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E7%B1%BB%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="nav-text">1. 类之间的关系</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-%E7%BB%84%E5%90%88"><span class="nav-text">1.1. 组合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-%E8%81%9A%E5%90%88"><span class="nav-text">1.2. 聚合</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="nav-text">二、设计模式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99"><span class="nav-text">设计原则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#A%EF%BC%8E%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F"><span class="nav-text">A．创建型模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F%EF%BC%88%E8%99%9A%E6%8B%9F%E6%9E%84%E9%80%A0%E5%AD%90%E6%A8%A1%E5%BC%8F-%E5%A4%9A%E6%80%81%E6%80%A7%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%EF%BC%89"><span class="nav-text">1. 工厂方法模式（虚拟构造子模式&#x2F;多态性工厂模式）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="nav-text">2. 抽象工厂模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="nav-text">3. 单例模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="nav-text">4. 建造者模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F"><span class="nav-text">5. 原型模式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#B%EF%BC%8E%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F"><span class="nav-text">B．结构型模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-text">6. 适配器模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-%E7%BB%84%E5%90%88%EF%BC%88%E9%83%A8%E5%88%86-%E6%95%B4%E4%BD%93%EF%BC%89%E6%A8%A1%E5%BC%8F"><span class="nav-text">7. 组合（部分-整体）模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-text">8. 装饰器模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F"><span class="nav-text">9. 代理模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F"><span class="nav-text">10. 享元模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-%E5%A4%96%E8%A7%82%EF%BC%88%E9%97%A8%E9%9D%A2%EF%BC%89%E6%A8%A1%E5%BC%8F"><span class="nav-text">11. 外观（门面）模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F"><span class="nav-text">12. 桥接模式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#C%EF%BC%8E%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F"><span class="nav-text">C．行为型模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#13-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F"><span class="nav-text">13. 策略模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F"><span class="nav-text">14. 模板方法模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F-%E5%8F%91%E5%B8%83-%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F"><span class="nav-text">15. 观察者模式(发布-订阅模式)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-text">16. 迭代器模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F"><span class="nav-text">17. 职责链模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#18-%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F"><span class="nav-text">18. 命令模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#19-%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F"><span class="nav-text">19. 备忘录模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F"><span class="nav-text">20. 状态模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#21-%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="nav-text">21. 访问者模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#22-%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-text">22. 解释器模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#23-%E4%B8%AD%E4%BB%8B%E8%80%85-%E8%B0%83%E5%81%9C%E8%80%85-%E6%A8%A1%E5%BC%8F"><span class="nav-text">23. 中介者(调停者)模式</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="王钰博" src="/images/12.jpg"><p class="site-author-name" itemprop="name">王钰博</p><div class="site-description" itemprop="description">个人博客</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">120</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">22</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">14</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/Githubwyb" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Githubwyb" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:1061322005@qq.com" title="E-Mail → mailto:1061322005@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a></span></div><div class="links-of-blogroll motion-element"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> 友情链接</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://githubwyb.github.io/bookPages/" title="https:&#x2F;&#x2F;githubwyb.github.io&#x2F;bookPages&#x2F;">markdown books</a></li></ul></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><a href="http://www.beian.miit.gov.cn/" rel="noopener" target="_blank">豫ICP备16023189号 </a><img src="/images/beian.png" style="display:inline-block"></div><div class="copyright">&copy; <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">王钰博</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-area-chart"></i> </span><span title="站点总字数">882k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">13:22</span></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动</div><div class="addthis_inline_share_toolbox"><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e1986d4e4e2d132" async></script></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-divider">|</span> <span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/medium-zoom.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/js/local-search.js"></script><script>document.querySelectorAll(".pdfobject-container").forEach(e=>{let t=e.dataset.target,a="#"+Object.entries({navpanes:0,toolbar:0,statusbar:0,pagemode:"thumbs",view:"FitH"}).map(([e,t])=>`${e}=${encodeURIComponent(t)}`).join("&"),i=`/lib/pdf/web/viewer.html?file=${encodeURIComponent(t)}${a}`;NexT.utils.supportsPDFs()?e.innerHTML=`<embed class="pdfobject" src="${t+a}" type="application/pdf" style="height: ${e.dataset.height};">`:e.innerHTML=`<iframe src="${i}" style="height: ${e.dataset.height};" frameborder="0"></iframe>`})</script><script>"undefined"==typeof MathJax?(window.MathJax={loader:{source:{"[tex]/amsCd":"[tex]/amscd","[tex]/AMScd":"[tex]/amscd"}},tex:{inlineMath:{"[+]":[["$","$"]]},tags:"ams"},options:{renderActions:{findScript:[10,e=>{document.querySelectorAll('script[type^="math/tex"]').forEach(t=>{const a=!!t.type.match(/; *mode=display/),n=new e.options.MathItem(t.textContent,e.inputJax[0],a),d=document.createTextNode("");t.parentNode.replaceChild(d,t),n.start={node:d,delim:"",n:0},n.end={node:d,delim:"",n:0},e.math.push(n)})},"",!1],insertedScript:[200,()=>{document.querySelectorAll("mjx-container").forEach(e=>{let t=e.parentNode;"li"===t.nodeName.toLowerCase()&&t.parentNode.classList.add("has-jax")})},"",!1]}}},function(){var e=document.createElement("script");e.src="/lib/mathjax/tex-mml-chtml.js",e.defer=!0,document.head.appendChild(e)}()):(MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typeset())</script><script>NexT.utils.loadComments(document.querySelector("#valine-comments"),()=>{NexT.utils.getScript("//unpkg.com/valine/dist/Valine.min.js",()=>{var e=["nick","mail","link"],a="nick,mail";a=a.split(",").filter(a=>e.includes(a)),new Valine({el:"#valine-comments",verify:!1,notify:!1,appId:"qmLbUHV1HOr841BOYkl84riu-gzGzoHsz",appKey:"j4fgTcf1yHRDD5X3HUH5EH95",placeholder:"^_^ happy everyday!",avatar:"wavatar",meta:a,pageSize:"10",visitor:!1,lang:"zh-cn",path:location.pathname,recordIP:!1,serverURLs:""})},window.Valine)})</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":true,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"bottom":-30,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body><script type="text/javascript" src="/lib/jquery-3.4.1.min.js"></script><script type="text/javascript" src="/js/src/love.js"></script></html>